/*! routux v0.2.3 | MIT (c) 2015 Nicolas Tallefourtane - https://github.com/Nicolab/routux */!function(e){function t(r){if(o[r])return o[r].exports;var l=o[r]={exports:{},id:r,loaded:!1};return e[r].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var r=(o(1),unitjs),l=unitjs,c=l.assert,u=new routux.Router,n=o(2),a=n.createSpiedCtrls();describe("Route: /home",function(){before(function(){u.use(function(e,t){r.string(e.current).isIdenticalTo("/home").object(e.query).object(e.params).hasProperty("path","home").object(e.ctx).hasNotProperty("mw1Hook").hasNotProperty("mw2Hook")["function"](t),e.ctx.mw1Hook=!0,a.mw1(e,t),t()}),u.use(function(e,t){r.string(e.current).isIdenticalTo("/home").object(e.query).object(e.params).hasProperty("path","home").object(e.ctx).hasProperty("mw1Hook",!0).hasNotProperty("mw2Hook")["function"](t),e.ctx.mw2Hook=!0,a.mw2(e,t),t()}),u.use("/home",a.home),u.use("/routeA",a.routeA),u.use("/routeA",a.mwA),u.use("/routeA",a.routeA2),u.use("/routeB",a.routeB),u.use("/routeC",a.mwC),u.use("/routeC",a.mwC2),u.use("/routeC",a.routeC),u.use("/routeD",a.mw3,a.routeD),u.use("/routeE",a.mw4,a.mw5,a.routeE),u.use(function(e,t,o){a.errorHandler1(e,t,o),o(e)}),u.use(function(e,t,o){return a.errorHandler2(e,t,o)}),u.run()}),it("home should be called",function(){c("/home"===u.location.current,'current location must be "/home"'),c(1===a.home.callCount,'ctrl "home" must be called once')}),it("Generic middlewares must be called",function(){c("/home"===u.location.current,'current location must be "/home"'),c(1===a.home.callCount,'ctrl "home" must be called once'),c(1===a.mw1.callCount,"mw1 must be called"),c(1===a.mw2.callCount,"mw2 must be called")}),it('"req" must be the same object reference',function(){var e=a.mw1.args[0][0],t=(a.mw1.args[0][1],a.mw1.args[0][0]);a.mw1.args[0][1];r.given("req is the same reference for each call").object(e).isIdenticalTo(t).object(e.ctx).hasProperty("mw1Hook",!0).hasProperty("mw2Hook",!0).object(t.ctx).hasProperty("mw1Hook",!0).hasProperty("mw2Hook",!0)}),it("Others routes, ctrls and middlewares must be never called",function(){c("/home"===u.location.current,'current location must be "/home"'),c(1===a.home.callCount,'ctrl "home" must be called once'),c(!a.routeA.called,"ctrl must be not called"),c(!a.routeA2.called,"ctrl must be not called"),c(!a.routeB.called,"ctrl must be not called"),c(!a.routeC.called,"ctrl must be not called"),c(!a.routeD.called,"ctrl must be not called"),c(!a.routeE.called,"ctrl must be not called"),c(!a.mwA.called,"middleware must be not called"),c(!a.mwC.called,"middleware must be not called"),c(!a.mwC2.called,"middleware must be not called"),c(!a.mw3.called,"middleware must be not called"),c(!a.mw4.called,"middleware must be not called"),c(!a.mw5.called,"middleware must be not called"),c(!a.errorHandler1.called,"errorHandler must be not called"),c(!a.errorHandler2.called,"errorHandler must be not called")})})},function(e,t){"use strict";e.exports={url:"http://localhost:8080"}},function(e,t){"use strict";var o={execOnDOMContentLoaded:function(e){document.addEventListener("DOMContentLoaded",e)},createSpiedCtrls:function(){var e=unitjs.spy;return{mw1:e(),mw2:e(),mw3:e(),mw4:e(),mw5:e(),mwA:e(),mwC:e(),mwC2:e(),home:e(),routeA:e(),routeA2:e(),routeB:e(),routeC:e(),routeD:e(),routeE:e(),errorHandler1:e(),errorHandler2:e(),errorHandler3:e()}}};e.exports=o}]);