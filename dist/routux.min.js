/*! routux v0.2.5 | MIT (c) 2015 Nicolas Tallefourtane - https://github.com/Nicolab/routux */!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.routux=t():e.routux=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=r(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=n(o),a=r(10),u=n(a),s={Router:u["default"],Route:i["default"],noConflict:function(){return window&&(window.routux=null,delete window.routux),this}};t["default"]=s,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,r){"use strict";var n=r(3)["default"],o=r(7)["default"];Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),a=-1,u=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),this.router=t.router,this.middlewares=t.middlewares,this.pattern=t.pattern,this.name=t.name||this.pattern,a++,Object.defineProperty(this,"_uid",{enumerable:!0,configurable:!1,writable:!1,value:a}),!this.middlewares.length)throw new Error("A route must have one middleware (or more).");this.reset()}return n(e,[{key:"reset",value:function(){return this.params={},this.query={},this.regexp=i(this.pattern,this.router.opt.regexp),this.getPath=i.compile(this.pattern),this}},{key:"getUrl",value:function(e){return this.router.getUrl(this,e)}},{key:"getFullUrl",value:function(e){return this.router.getFullUrl(this,e)}},{key:"baseUrl",get:function(){return this.router.location.baseUrl}}]),e}();t["default"]=u,e.exports=t["default"]},function(e,t,r){"use strict";var n=r(4)["default"];t["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),n(e,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t.__esModule=!0},function(e,t,r){e.exports={"default":r(5),__esModule:!0}},function(e,t,r){var n=r(6);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t){"use strict";t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,r){function n(e){for(var t,r=[],n=0,o=0,i="";null!=(t=g.exec(e));){var a=t[0],s=t[1],l=t.index;if(i+=e.slice(o,l),o=l+a.length,s)i+=s[1];else{i&&(r.push(i),i="");var c=t[2],f=t[3],p=t[4],h=t[5],d=t[6],y=t[7],v="+"===d||"*"===d,m="?"===d||"*"===d,b=c||"/",w=p||h||(y?".*":"[^"+b+"]+?");r.push({name:f||n++,prefix:c||"",delimiter:b,optional:m,repeat:v,pattern:u(w)})}}return o<e.length&&(i+=e.substr(o)),i&&r.push(i),r}function o(e){return i(n(e))}function i(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(r){for(var n="",o=r||{},i=0;i<e.length;i++){var a=e[i];if("string"!=typeof a){var u,s=o[a.name];if(null==s){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(y(s)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+s+'"');if(0===s.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(u=encodeURIComponent(s[l]),!t[i].test(u))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');n+=(0===l?a.prefix:a.delimiter)+u}}else{if(u=encodeURIComponent(s),!t[i].test(u))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');n+=a.prefix+u}}else n+=a}return n}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function s(e,t){return e.keys=t,e}function l(e){return e.sensitive?"":"i"}function c(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return s(e,t)}function f(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(d(e[o],t,r).source);var i=new RegExp("(?:"+n.join("|")+")",l(r));return s(i,t)}function p(e,t,r){for(var o=n(e),i=h(o,r),a=0;a<o.length;a++)"string"!=typeof o[a]&&t.push(o[a]);return s(i,t)}function h(e,t){t=t||{};for(var r=t.strict,n=t.end!==!1,o="",i=e[e.length-1],u="string"==typeof i&&/\/$/.test(i),s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)o+=a(c);else{var f=a(c.prefix),p=c.pattern;c.repeat&&(p+="(?:"+f+p+")*"),p=c.optional?f?"(?:"+f+"("+p+"))?":"("+p+")?":f+"("+p+")",o+=p}}return r||(o=(u?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=n?"$":r&&u?"":"(?=\\/|$)",new RegExp("^"+o,l(t))}function d(e,t,r){return t=t||[],y(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?c(e,t,r):y(e)?f(e,t,r):p(e,t,r)}var y=r(9);e.exports=d,e.exports.parse=n,e.exports.compile=o,e.exports.tokensToFunction=i,e.exports.tokensToRegExp=h;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=r(3)["default"],o=r(7)["default"],i=r(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),u=i(a),s=r(11),l=r(12),c=i(l),f=-1,p=function(){function e(t){o(this,e);var r=this;f++,Object.defineProperty(this,"_uid",{enumerable:!0,configurable:!1,writable:!1,value:f}),this.opt={location:{Adapter:c["default"],opt:[]},regexp:{sensitive:!1,strict:!1,end:!0}},s.mergeRecursive(this.opt,t),this.running=!1,this._routes=[],this.routes={},this.location=new this.opt.location.Adapter(this.opt.location.opt),this.reset(),this.location.addChangeListener(function(){r.build().run()}),this.location.ensureSlash()}return n(e,[{key:"reset",value:function(){return this.matches={},this._matches=[],this.req={current:this.location.current,query:this.location.qs.current,params:{},ctx:{}},this}},{key:"getRoute",value:function(e){var t='First argument of "Router.getRoute()" must be a valid "route" (route name or "Route" instance).';if(!e)throw new ReferenceError(t);if("string"==typeof e?e=this.routes[e]:e.name&&(e=this.routes[e.name]),!e instanceof u["default"])throw new ReferenceError(t);return e}},{key:"getPath",value:function(e,t){return this.getRoute(e).getPath(t)}},{key:"getUrl",value:function(e,t){return this.location.urlPrefix+this.getPath(e,t)}},{key:"getFullUrl",value:function(e,t){var r=this.getUrl(e,t);return r="/"===r.charAt(0)?r.substring(1):r,this.location.baseUrl+r}},{key:"goTo",value:function(e,t){if(!e)throw new ReferenceError('First argument of "Router.goTo()" must be a valid "route".');return this.goToLocation(this.getPath(e,t))}},{key:"replaceWith",value:function(e,t){return this.replaceLocation(this.getPath(e,t))}},{key:"goToLocation",value:function(e){return this.location.push(e),this}},{key:"replaceLocation",value:function(e){return this.location.replace(e),this}},{key:"goBack",value:function(){return this.location.historyBack(),this}},{key:"goForward",value:function(){return this.location.historyForward(),this}},{key:"use",value:function(e){var t=void 0,r=void 0,n=void 0,o=void 0;return t=this._routes.length,"function"==typeof e?(n="/:path*",o=Array.prototype.slice.call(arguments,0),r="__route_"+t):"object"==typeof e?(n=e.pattern||"/:path*",r=e.name||"__route_"+t,o=e.middlewares):"string"==typeof arguments[0]&&"string"==typeof arguments[1]?(r=arguments[0],n=arguments[1],o=Array.prototype.slice.call(arguments,2)):(n=e,r="__route_"+t,o=Array.prototype.slice.call(arguments,1)),this.routes[r]=new u["default"]({router:this,name:r,pattern:n,middlewares:o}),this._routes.push(this.routes[r]),this.buildRoute(this._routes[t])}},{key:"build",value:function(){this.reset();for(var e=0,t=this._routes.length;t>e;e++)this.buildRoute(this._routes[e]);return this}},{key:"buildRoute",value:function(e){var t=void 0;if(e.reset().regexp.result=e.regexp.exec(this.location.current),e.regexp.result){for(var r=0,n=e.regexp.keys.length;n>r;r++)t=e.regexp.keys[r].name,e.query=this.req.query,e.params[t]=e.regexp.result[r+1],this.req.params[t]=e.params[t];this.matches[e.name]=e,this._matches.push(this.matches[e.name])}return this}},{key:"run",value:function(){var e=this,t=void 0,r=void 0;t=[],r=function(n){if(t.length){var o=t.shift(),i=o.route,a=o.middleware;if(a.length<3){if(n)return r(n);a.call(i,e.req,function(e){r(e)})}else a.call(i,n,e.req,function(e){r(e)})}};for(var n=0,o=this._matches.length;o>n;n++)for(var i=this._matches[n],a=0,u=i.middlewares.length;u>a;a++)t.push({route:i,middleware:i.middlewares[a]});return this.running=!0,r(),this}},{key:"baseUrl",get:function(){return this.location.baseUrl}},{key:"url",get:function(){return this.location.url}},{key:"fullUrl",get:function(){return this.location.fullUrl}},{key:"current",get:function(){return this.location.current}}]),e}();t["default"]=p,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function n(e){var t=arguments.length;if(2>t)throw new Error("There should be at least 2 arguments passed to mergeRecursive()");for(var r=1;t>r;r++)for(var o in arguments[r])e[o]&&"object"==typeof e[o]?e[o]=n(e[o],arguments[r][o]):e[o]=arguments[r][o];return e};t["default"]={mergeRecursive:r},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(13)["default"],o=r(26)["default"],i=r(3)["default"],a=r(7)["default"],u=r(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=r(37),l=u(s),c=function(e){function t(e){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.pathPrefix=this.opt.pathPrefix||"#",this.urlPrefix=this.pathPrefix,this._onChange=this._onChange.bind(this)}return o(t,e),i(t,[{key:"normalizePath",value:function(e){return e&&0===e.indexOf(this.baseUrl)&&(e=e.slice(this.baseUrl.length)),-1===e.indexOf(this.pathPrefix)?decodeURI(e):decodeURI(e.split(this.pathPrefix)[1]||"")}},{key:"historyBack",value:function(){n(Object.getPrototypeOf(t.prototype),"pop",this).call(this),window.history.back()}},{key:"historyForward",value:function(){n(Object.getPrototypeOf(t.prototype),"push",this).call(this),window.history.forward()}},{key:"push",value:function(e){n(Object.getPrototypeOf(t.prototype),"push",this).call(this,e),"undefined"!=typeof e&&(window.location.hash=this.pathPrefix+e)}},{key:"replace",value:function(e){n(Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),window.location.replace(window.location.pathname+window.location.search+this.pathPrefix+e)}},{key:"addChangeListener",value:function(e){n(Object.getPrototypeOf(t.prototype),"addChangeListener",this).call(this,e),this._isListening||(window.addEventListener?window.addEventListener("hashchange",this._onChange,!1):window.attachEvent("onhashchange",this._onChange),this._isListening=!0)}},{key:"removeChangeListener",value:function(e){n(Object.getPrototypeOf(t.prototype),"removeChangeListener",this).call(this,e),0===this._listeners.length&&(window.removeEventListener?window.removeEventListener("hashchange",this._onChange,!1):window.removeEvent("onhashchange",this._onChange),this._isListening=!1)}},{key:"current",get:function(){return this.normalizePath(window.location.href)}},{key:"queryString",get:function(){return window.location.search.substring(1)}},{key:"baseUrl",get:function(){return window.location.origin+window.location.pathname}},{key:"url",get:function(){return this.urlPrefix+this.normalizePath(window.location.hash)}},{key:"fullUrl",get:function(){var e="/"===this.url.charAt(0)?this.url.substring(1):this.url;return this.baseUrl+e}}]),t}(l["default"]);t["default"]=c,e.exports=t["default"]},function(e,t,r){"use strict";var n=r(14)["default"];t["default"]=function(e,t,r){for(var o=!0;o;){var i=e,a=t,u=r;s=c=l=void 0,o=!1,null===i&&(i=Function.prototype);var s=n(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(u)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=a,r=u,o=!0}},t.__esModule=!0},function(e,t,r){e.exports={"default":r(15),__esModule:!0}},function(e,t,r){var n=r(6);r(16),e.exports=function(e,t){return n.getDesc(e,t)}},function(e,t,r){var n=r(17);r(21)("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},function(e,t,r){var n=r(18),o=r(20);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(19);e.exports=0 in Object("z")?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){e.exports=function(e,t){var n=r(22),o=(r(24).Object||{})[e]||Object[e],i={};i[e]=t(o),n(n.S+n.F*r(25)(function(){o(1)}),"Object",i)}},function(e,t,r){var n=r(23),o=r(24),i="prototype",a=function(e,t){return function(){return e.apply(t,arguments)}},u=function(e,t,r){var s,l,c,f,p=e&u.G,h=e&u.P,d=p?n:e&u.S?n[t]:(n[t]||{})[i],y=p?o:o[t]||(o[t]={});p&&(r=t);for(s in r)l=!(e&u.F)&&d&&s in d,l&&s in y||(c=l?d[s]:r[s],p&&"function"!=typeof d[s]?f=r[s]:e&u.B&&l?f=a(c,n):e&u.W&&d[s]==c?!function(e){f=function(t){return this instanceof e?new e(t):e(t)},f[i]=e[i]}(c):f=h&&"function"==typeof c?a(Function.call,c):c,y[s]=f,h&&((y[i]||(y[i]={}))[s]=c))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,e.exports=u},function(e,t){var r="undefined",n=e.exports=typeof window!=r&&window.Math==Math?window:typeof self!=r&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var r=e.exports={};"number"==typeof __e&&(__e=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,r){"use strict";var n=r(27)["default"],o=r(29)["default"];t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=n(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o?o(e,t):e.__proto__=t)},t.__esModule=!0},function(e,t,r){e.exports={"default":r(28),__esModule:!0}},function(e,t,r){var n=r(6);e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){e.exports={"default":r(30),__esModule:!0}},function(e,t,r){r(31),e.exports=r(24).Object.setPrototypeOf},function(e,t,r){var n=r(22);n(n.S,"Object",{setPrototypeOf:r(32).set})},function(e,t,r){var n=r(6).getDesc,o=r(33),i=r(34),a=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t){try{t=r(35)(Function.call,n(Object.prototype,"__proto__").set,2),t({},[])}catch(o){e=!0}return function(r,n){return a(r,n),e?r.__proto__=n:t(r,n),r}}():void 0),check:a}},function(e,t){e.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},function(e,t,r){var n=r(33);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(36);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";var n=r(3)["default"],o=r(7)["default"],i=r(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=r(38),u=i(a),s=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),this.PUSH="push",this.REPLACE="replace",this.POP="pop",this._actionType=null,this._isListening=!1,this._listeners=[];var r=this;this.opt=t,this.qs={__proto__:u["default"]},this.qs.currentWith=function(e){return r.qs.parse(r.queryString,e)},Object.defineProperty(this.qs,"current",{get:function(){return r.qs.parse(r.normalizePath(r.queryString))}}),this.urlPrefix=this.pathPrefix="/"}return n(e,[{key:"ensureSlash",value:function(){var e=this.current;return"/"===e.charAt(0)?!0:(this.replace("/"+e),!1)}},{key:"normalizePath",value:function(e){return"/"===e.charAt(0)?decodeURI(e):"/"+decodeURI(e)}},{key:"historyBack",value:function(){this.pop()}},{key:"historyForward",value:function(){this.push()}},{key:"_onChange",value:function(){var e=void 0;this.ensureSlash()&&(e=this._actionType,this._actionType=null,this.notifyChange(e||this.POP))}},{key:"notifyChange",value:function(e){var t=void 0,r=void 0;r=this,t={path:this.current,type:e},this._listeners.forEach(function(e){e.call(r,t)})}},{key:"addChangeListener",value:function(e){this._listeners.push(e),this.ensureSlash()}},{key:"removeChangeListener",value:function(e){this._listeners=this._listeners.filter(function(t){return t!==e})}},{key:"push",value:function(){this._actionType=this.PUSH}},{key:"replace",value:function(){this._actionType=this.REPLACE}},{key:"pop",value:function(){this._actionType=this.POP}},{key:"current",get:function(){throw new ReferenceError("Location.current is not implemented by the adapter used.")}},{key:"queryString",get:function(){throw new ReferenceError("Location.queryString is not implemented by the adapter used.")}},{key:"baseUrl",get:function(){throw new ReferenceError("Location.baseUrl is not implemented by the adapter used.")}},{key:"url",get:function(){throw new ReferenceError("Location.url is not implemented by the adapter used.")}},{key:"fullUrl",get:function(){return this.baseUrl+this.url}}]),e}();t["default"]=s,e.exports=t["default"]},function(e,t,r){var n=r(39),o=r(41);e.exports={stringify:n,parse:o}},function(e,t,r){var n=r(40),o={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}},strictNullHandling:!1,skipNulls:!1,encode:!0};o.stringify=function(e,t,r,i,a,u,s){if("function"==typeof s)e=s(t,e);else if(n.isBuffer(e))e=e.toString();else if(e instanceof Date)e=e.toISOString();else if(null===e){if(i)return u?n.encode(t):t;e=""}if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return u?[n.encode(t)+"="+n.encode(e)]:[t+"="+e];var l=[];if("undefined"==typeof e)return l;for(var c=Array.isArray(s)?s:Object.keys(e),f=0,p=c.length;p>f;++f){var h=c[f];a&&null===e[h]||(l=Array.isArray(e)?l.concat(o.stringify(e[h],r(t,h),r,i,a,u,s)):l.concat(o.stringify(e[h],t+"["+h+"]",r,i,a,u,s)))}return l},e.exports=function(e,t){t=t||{};var r,n,i="undefined"==typeof t.delimiter?o.delimiter:t.delimiter,a="boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling,u="boolean"==typeof t.skipNulls?t.skipNulls:o.skipNulls,s="boolean"==typeof t.encode?t.encode:o.encode;"function"==typeof t.filter?(n=t.filter,e=n("",e)):Array.isArray(t.filter)&&(r=n=t.filter);var l=[];if("object"!=typeof e||null===e)return"";var c;c=t.arrayFormat in o.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";var f=o.arrayPrefixGenerators[c];r||(r=Object.keys(e));for(var p=0,h=r.length;h>p;++p){var d=r[p];u&&null===e[d]||(l=l.concat(o.stringify(e[d],d,f,a,u,s,n)))}return l.join(i)}},function(e,t){var r={};r.hexTable=new Array(256);for(var n=0;256>n;++n)r.hexTable[n]="%"+((16>n?"0":"")+n.toString(16)).toUpperCase();t.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0,o=e.length;o>n;++n)"undefined"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,n){if(!r)return e;if("object"!=typeof r)return Array.isArray(e)?e.push(r):"object"==typeof e?e[r]=!0:e=[e,r],e;if("object"!=typeof e)return e=[e].concat(r);Array.isArray(e)&&!Array.isArray(r)&&(e=t.arrayToObject(e,n));for(var o=Object.keys(r),i=0,a=o.length;a>i;++i){var u=o[i],s=r[u];Object.prototype.hasOwnProperty.call(e,u)?e[u]=t.merge(e[u],s,n):e[u]=s}return e},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;"string"!=typeof e&&(e=""+e);for(var t="",n=0,o=e.length;o>n;++n){var i=e.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?t+=e[n]:128>i?t+=r.hexTable[i]:2048>i?t+=r.hexTable[192|i>>6]+r.hexTable[128|63&i]:55296>i||i>=57344?t+=r.hexTable[224|i>>12]+r.hexTable[128|i>>6&63]+r.hexTable[128|63&i]:(++n,i=65536+((1023&i)<<10|1023&e.charCodeAt(n)),t+=r.hexTable[240|i>>18]+r.hexTable[128|i>>12&63]+r.hexTable[128|i>>6&63]+r.hexTable[128|63&i])}return t},t.compact=function(e,r){if("object"!=typeof e||null===e)return e;r=r||[];var n=r.indexOf(e);if(-1!==n)return r[n];if(r.push(e),Array.isArray(e)){for(var o=[],i=0,a=e.length;a>i;++i)"undefined"!=typeof e[i]&&o.push(e[i]);return o}var u=Object.keys(e);for(i=0,a=u.length;a>i;++i){var s=u[i];e[s]=t.compact(e[s],r)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){var n=r(40),o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1};o.parseValues=function(e,t){for(var r={},o=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0,a=o.length;a>i;++i){var u=o[i],s=-1===u.indexOf("]=")?u.indexOf("="):u.indexOf("]=")+1;if(-1===s)r[n.decode(u)]="",t.strictNullHandling&&(r[n.decode(u)]=null);else{var l=n.decode(u.slice(0,s)),c=n.decode(u.slice(s+1));Object.prototype.hasOwnProperty.call(r,l)?r[l]=[].concat(r[l]).concat(c):r[l]=c}}return r},o.parseObject=function(e,t,r){if(!e.length)return t;var n,i=e.shift();if("[]"===i)n=[],n=n.concat(o.parseObject(e,t,r));else{n=r.plainObjects?Object.create(null):{};var a="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,u=parseInt(a,10),s=""+u;!isNaN(u)&&i!==a&&s===a&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(n=[],n[u]=o.parseObject(e,t,r)):n[a]=o.parseObject(e,t,r)}return n},o.parseKeys=function(e,t,r){if(e){r.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,"[$1]"));var n=/^([^\[\]]*)/,i=/(\[[^\[\]]*\])/g,a=n.exec(e),u=[];if(a[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(a[1])&&!r.allowPrototypes)return;u.push(a[1])}for(var s=0;null!==(a=i.exec(e))&&s<r.depth;)++s,(r.plainObjects||!Object.prototype.hasOwnProperty(a[1].replace(/\[|\]/g,""))||r.allowPrototypes)&&u.push(a[1]);return a&&u.push("["+e.slice(a.index)+"]"),o.parseObject(u,t,r)}},e.exports=function(e,t){if(t=t||{},t.delimiter="string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:o.delimiter,t.depth="number"==typeof t.depth?t.depth:o.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,t.parseArrays=t.parseArrays!==!1,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:o.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"==typeof e)return t.plainObjects?Object.create(null):{};for(var r="string"==typeof e?o.parseValues(e,t):e,i=t.plainObjects?Object.create(null):{},a=Object.keys(r),u=0,s=a.length;s>u;++u){var l=a[u],c=o.parseKeys(l,r[l],t);i=n.merge(i,c,t)}return n.compact(i)}}])});